_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"8eLO":function(t,a,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/DailyTaskHistory",function(){return e("NaDj")}])},"8uza":function(t,a,e){t.exports={daily_task_history_item:"DailyTaskHistoryItem_daily_task_history_item__3L7Z7"}},BsWD:function(t,a,e){"use strict";e.d(a,"a",(function(){return r}));var i=e("a3WO");function r(t,a){if(t){if("string"===typeof t)return Object(i.a)(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Object(i.a)(t,a):void 0}}},KQm4:function(t,a,e){"use strict";e.d(a,"a",(function(){return s}));var i=e("a3WO");var r=e("BsWD");function s(t){return function(t){if(Array.isArray(t))return Object(i.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},NaDj:function(t,a,e){"use strict";e.r(a);var i=e("o0o1"),r=e.n(i),s=e("HaE+"),n=e("nKUr"),o=e("q1tI"),c=e("+o6H"),l=e("MYhE"),u=e("cWnB"),y=e("KQm4"),d=e("WD81"),f=e.n(d),j=e("8uza"),b=e.n(j),_=e("3Z9Z"),h=e("JI6e"),D=e("gHQx"),k=e("vpEI"),O=function(t){for(var a=0,e=0,i=0;i<t.dailyTaskHistoryList.length;i++)1==t.dailyTaskHistoryList[i].doneFlg&&a++,e+=t.dailyTaskHistoryList[i].doneTime;var r="";return a==t.dailyTaskHistoryList.length&&0!=t.dailyTaskHistoryList.length&&(r=" yellow"),Object(n.jsx)("div",{className:b.a.daily_task_history_item+r,onClick:function(){return t.showDailyTaskHistoryDetailModal(t.dailyTaskHistoryList)},children:Object(n.jsxs)(_.a,{children:[Object(n.jsx)(h.a,{xs:1}),Object(n.jsx)(h.a,{xs:2,children:D.b(t.date)}),Object(n.jsxs)(h.a,{xs:3,children:["Achievement: ",a," of ",t.dailyTaskHistoryList.length]}),Object(n.jsxs)(h.a,{xs:6,children:["Total Done Time: ",k.a(e)]})]})})},T=function(t){return Object(n.jsx)("div",{className:f.a.daily_task_history_list,children:t.dailyTaskHistoryList.map((function(a,e){var i=new Date(t.targetDate);return i.setDate(t.targetDate.getDate()-e),Object(n.jsx)(O,{dailyTaskHistoryList:a,date:i,showDailyTaskHistoryDetailModal:t.showDailyTaskHistoryDetailModal},"DailyTaskHistoryItem"+e)}))})},m=e("GA0N"),x=e("20a2"),p=e.n(x),v=e("bDXX"),H=e.n(v);function g(){return(g=Object(s.a)(r.a.mark((function t(a){var e,i,s;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=D.c(a),i=new Array,t.prev=2,t.next=5,Object(l.b)().get("/api/daily_task_history",{params:{nextTargetDate:e}});case 5:s=t.sent,i=w(s.data),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),p.a.push("/Error?400");case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))).apply(this,arguments)}function w(t){for(var a=t.length,e=[],i=0;i<a;i++){var r=t[i].length;e[i]=new Array;for(var s=0;s<r;s++){var n=new m.b(t[i][s].dailyTaskId,t[i][s].title,t[i][s].doneDate,t[i][s].doneTime,t[i][s].quota,t[i][s].doneFlg);e[i].push(n)}}return e}var N=function(t){var a=Object(o.useState)([]),e=a[0],i=a[1];Object(o.useEffect)((function(){r()}),[]);var r=function(){(function(t){return g.apply(this,arguments)})(t.targetDate).then((function(t){i(t)}))};return Object(n.jsxs)("div",{children:[Object(n.jsx)(T,{dailyTaskHistoryList:e,targetDate:t.targetDate,showDailyTaskHistoryDetailModal:t.showDailyTaskHistoryDetailModal},"DailyTaskHistoryList"),Object(n.jsx)("div",{className:H.a.daily_task_history_load,onClick:function(){var a=new Date(t.targetDate),r=t.targetDateDiff+5;a.setDate(a.getDate()-r);try{Object(l.b)().get("/api/daily_task_history",{params:{nextTargetDate:D.c(a)}}).then((function(a){var s=w(a.data);i([].concat(Object(y.a)(e),Object(y.a)(s))),t.setTargetDateDiff(r)}))}catch(s){p.a.push("/Error?400")}},children:Object(n.jsx)("i",{className:"fa fa-arrow-circle-down faa-wrench animated-hover"})})]})},L=e("zM5D"),I=(e("5Buo"),e("oYNC")),E=e.n(I),A=function(t){var a=k.a(t.dailyTaskHistory.quota),e=k.a(t.dailyTaskHistory.doneTime),i=k.b(t.dailyTaskHistory.quota,t.dailyTaskHistory.doneTime),r=1==t.dailyTaskHistory.doneFlg?"\u3010 DONE \u3011":"",s="";return 1==t.dailyTaskHistory.doneFlg&&(s=" yellow"),Object(n.jsxs)("div",{className:E.a.daily_task_history_detail_item+s,children:[Object(n.jsxs)("div",{className:E.a.title,children:[t.dailyTaskHistory.title," ",r]}),Object(n.jsxs)(_.a,{children:[Object(n.jsxs)(h.a,{xs:4,className:E.a.quota_label,children:["Quota: ",a]}),Object(n.jsxs)(h.a,{xs:3,className:E.a.label,children:["Done: ",e]}),Object(n.jsxs)(h.a,{xs:5,className:E.a.label,children:["Remaining: ",i]})]})]})},M=function(t){return Object(n.jsxs)(L.a,{show:!0,onHide:t.close,children:[Object(n.jsx)(L.a.Header,{closeButton:!0,children:Object(n.jsx)(L.a.Title,{children:"Detail History"})}),Object(n.jsx)(L.a.Body,{children:t.dailyTaskHistoryList.map((function(t,a){return Object(n.jsx)(A,{dailyTaskHistory:t},"DailyTaskHistoryDetailItem"+a)}))}),Object(n.jsx)(L.a.Footer,{children:Object(n.jsx)(u.a,{variant:"dark",onClick:t.close,className:"button_sm",children:"close"})})]},"DailyTaskHistoryDetailModal")},B=e("YFqc"),S=e.n(B),q=e("Vvt1"),W=function(){var t=Object(o.useState)(new Date),a=t[0],e=(t[1],Object(o.useState)(0)),i=e[0],r=e[1],s=Object(o.useState)(!1),y=s[0],d=s[1],f=Object(o.useState)([]),j=f[0],b=f[1];Object(l.a)();return Object(n.jsxs)(c.a,{title:"Daily Task History.",children:[Object(n.jsx)(S.a,{href:"/DailyTask",children:Object(n.jsx)(u.a,{variant:"success",className:"button_lg",children:"\uff1c Daily Task Board"},"dailyTaskBoard")}),Object(n.jsx)(N,{targetDate:a,targetDateDiff:i,setTargetDateDiff:r,showDailyTaskHistoryDetailModal:function(t){b(t),d(!0)}}),y&&Object(n.jsx)(M,{close:function(){d(!1)},dailyTaskHistoryList:j})]})},C=e.n(q)()({loader:function(){var t=Object(s.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",W);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{ssr:!1});a.default=C},WD81:function(t,a,e){t.exports={daily_task_history_list:"DailyTaskHistoryList_daily_task_history_list__zbpJv"}},a3WO:function(t,a,e){"use strict";function i(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,i=new Array(a);e<a;e++)i[e]=t[e];return i}e.d(a,"a",(function(){return i}))},bDXX:function(t,a,e){t.exports={daily_task_history_load:"DailyTaskHistoryBoard_daily_task_history_load__10is6"}},oYNC:function(t,a,e){t.exports={daily_task_history_detail_item:"DailyTaskHistoryDetailItem_daily_task_history_detail_item__1ORrR",title:"DailyTaskHistoryDetailItem_title__2Vue9",quota_label:"DailyTaskHistoryDetailItem_quota_label__2IdBO"}},vpEI:function(t,a,e){"use strict";e.d(a,"a",(function(){return i})),e.d(a,"b",(function(){return r})),e.d(a,"c",(function(){return s}));var i=function(t){if(null==t)return"0 m";var a=Math.floor(t/60),e=t%60,i="";return a<0?"0 m":(0!=a&&(i+="".concat(a," h")),0!=e&&(i=""==i?i:i+" ",i+="".concat(e," m")),""==i?"0 m":i)},r=function(t,a){return i(null==a?t:t-a)},s=function(t){return/^[+,-]?([1-9]\d*|0)$/.test(t)}}},[["8eLO",0,2,5,6,1,3,4,7,8]]]);