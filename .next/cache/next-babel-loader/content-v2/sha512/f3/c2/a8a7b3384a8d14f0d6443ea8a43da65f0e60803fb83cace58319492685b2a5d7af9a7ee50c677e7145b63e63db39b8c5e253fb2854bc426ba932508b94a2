{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Router from 'next/router';\nimport { Container, Button, Form } from 'react-bootstrap';\nimport styles from '../styles/Index.module.css';\nimport Axios from \"axios\";\n\nconst index = () => {\n  const {\n    0: username,\n    1: setUsername\n  } = useState(\"shumiya\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"shumiya\"); // cookieを使用するaxios生成\n\n  let client = Axios.create({\n    withCredentials: true\n  }); // ログイン処理\n\n  const login = () => {\n    if (username == \"\" || password == \"\") {\n      return false;\n    }\n\n    client.post(`${process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_LOGIN}`, createParams()).then(() => {\n      console.log('login success'); // セッションにログイン情報保持\n\n      sessionStorage.clear();\n      sessionStorage.setItem('n', username);\n      Router.push('/DailyTask');\n    }).catch(err => {\n      console.log('err:', err.response);\n      Router.push('/Error?401');\n    });\n  };\n\n  const createUser = () => {\n    if (username == \"\" || password == \"\") {\n      return false;\n    }\n\n    client.post(`${process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_USER_NOAUTH}`, createJsonParams(), {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(() => {\n      console.log('Success to create user');\n      login();\n    }).catch(err => {\n      console.log('err:', err.response);\n      alert(err.response.data);\n    });\n  };\n\n  const createParams = () => {\n    var params = new URLSearchParams();\n    params.append('username', username);\n    params.append('password', password);\n    return params;\n  };\n\n  const createJsonParams = () => {\n    var params = {\n      username: username,\n      password: password,\n      enabledflg: 1,\n      adminflg: 0\n    };\n    return JSON.stringify(params);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"form_frame\",\n    children: [/*#__PURE__*/_jsx(Container, {\n      children: /*#__PURE__*/_jsxs(Form, {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.login_str,\n          children: \"Task Manager\"\n        }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Form.Label, {\n          children: \"User Name\"\n        }), /*#__PURE__*/_jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"User Name\",\n          onChange: e => setUsername(e.target.value),\n          value: username\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Form.Label, {\n          children: \"Password\"\n        }), /*#__PURE__*/_jsx(Form.Control, {\n          type: \"password\",\n          placeholder: \"Password\",\n          onChange: e => setPassword(e.target.value),\n          value: password\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n          variant: \"outline-primary\",\n          size: \"lg\",\n          block: true,\n          onClick: login,\n          children: \"Login\"\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n          variant: \"outline-success\",\n          size: \"lg\",\n          block: true,\n          onClick: createUser,\n          children: \"Create User\"\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"hr\", {})]\n  });\n};\n\nexport default index;","map":null,"metadata":{},"sourceType":"module"}