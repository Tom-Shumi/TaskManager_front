{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Router from 'next/router';\nimport { Container, Button, Form } from 'react-bootstrap';\nimport styles from '../styles/Index.module.css';\nimport Axios from \"axios\";\nimport getConfig from \"next/config\";\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar index = function index() {\n  var _useState = useState(\"shumiya\"),\n      username = _useState[0],\n      setUsername = _useState[1];\n\n  var _useState2 = useState(\"shumiya\"),\n      password = _useState2[0],\n      setPassword = _useState2[1]; // cookieを使用するaxios生成\n\n\n  var client = Axios.create({\n    withCredentials: true\n  }); // ログイン処理\n\n  var login = function login() {\n    if (username == \"\" || password == \"\") {\n      return false;\n    }\n\n    client.post(\"\".concat(publicRuntimeConfig.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_LOGIN), createParams()).then(function () {\n      console.log('login success'); // セッションにログイン情報保持\n\n      sessionStorage.clear();\n      sessionStorage.setItem('n', username);\n      Router.push('/DailyTask');\n    })[\"catch\"](function (err) {\n      console.log('err:', err.response);\n      Router.push('/Error?401');\n    });\n  };\n\n  var createUser = function createUser() {\n    if (username == \"\" || password == \"\") {\n      return false;\n    }\n\n    client.post(\"\".concat(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_USER_NOAUTH), createJsonParams(), {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(function () {\n      console.log('Success to create user');\n      login();\n    })[\"catch\"](function (err) {\n      console.log('err:', err.response);\n      alert(err.response.data);\n    });\n  };\n\n  var createParams = function createParams() {\n    var params = new URLSearchParams();\n    params.append('username', username);\n    params.append('password', password);\n    return params;\n  };\n\n  var createJsonParams = function createJsonParams() {\n    var params = {\n      username: username,\n      password: password,\n      enabledflg: 1,\n      adminflg: 0\n    };\n    return JSON.stringify(params);\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"form_frame\",\n    children: [/*#__PURE__*/_jsx(Container, {\n      children: /*#__PURE__*/_jsxs(Form, {\n        children: [/*#__PURE__*/_jsx(\"p\", {\n          className: styles.login_str,\n          children: \"Task Manager\"\n        }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Form.Label, {\n          children: \"User Name\"\n        }), /*#__PURE__*/_jsx(Form.Control, {\n          type: \"text\",\n          placeholder: \"User Name\",\n          onChange: function onChange(e) {\n            return setUsername(e.target.value);\n          },\n          value: username\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Form.Label, {\n          children: \"Password\"\n        }), /*#__PURE__*/_jsx(Form.Control, {\n          type: \"password\",\n          placeholder: \"Password\",\n          onChange: function onChange(e) {\n            return setPassword(e.target.value);\n          },\n          value: password\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n          variant: \"outline-primary\",\n          size: \"lg\",\n          block: true,\n          onClick: login,\n          children: \"Login\"\n        }), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(\"br\", {}), /*#__PURE__*/_jsx(Button, {\n          variant: \"outline-success\",\n          size: \"lg\",\n          block: true,\n          onClick: createUser,\n          children: \"Create User\"\n        })]\n      })\n    }), /*#__PURE__*/_jsx(\"hr\", {})]\n  });\n};\n\nexport default index;","map":null,"metadata":{},"sourceType":"module"}