{"ast":null,"code":"import _regeneratorRuntime from \"/app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"/app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport React, { useState, useEffect } from 'react';\nimport DailyTaskHistoryList from './DailyTaskHistoryList';\nimport { DailyTaskHistory } from '../common/interface';\nimport { getApiClient } from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport * as DatePickerUtil from '../util/DatePickerUtil';\nimport styles from '../../styles/DailyTaskHistoryBoard.module.css';\n\nvar DailyTaskHistoryBoard = function DailyTaskHistoryBoard(props) {\n  var _useState = useState([]),\n      dailyTaskHistoryList = _useState[0],\n      setDailyTaskHistoryList = _useState[1];\n\n  useEffect(function () {\n    callGetDailyTaskHistoryList();\n  }, []);\n\n  var callGetDailyTaskHistoryList = function callGetDailyTaskHistoryList() {\n    var res = getDailyTaskHistoryList(props.targetDate);\n    res.then(function (ret) {\n      setDailyTaskHistoryList(ret);\n    });\n  };\n\n  var loadNextHistory = function loadNextHistory() {\n    var nextTargetDate = new Date(props.targetDate);\n    var diff = props.targetDateDiff + 5;\n    nextTargetDate.setDate(nextTargetDate.getDate() - diff);\n\n    try {\n      getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n        params: {\n          nextTargetDate: DatePickerUtil.dateStrYYYYMMDD(nextTargetDate)\n        }\n      }).then(function (res) {\n        var taskCommentList = createDailyTaskHistoryList(res.data);\n        setDailyTaskHistoryList([].concat(_toConsumableArray(dailyTaskHistoryList), _toConsumableArray(taskCommentList)));\n        props.setTargetDateDiff(diff);\n      });\n    } catch (error) {\n      Router.push('/Error?400');\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsx(DailyTaskHistoryList, {\n      dailyTaskHistoryList: dailyTaskHistoryList,\n      targetDate: props.targetDate,\n      showDailyTaskHistoryDetailModal: props.showDailyTaskHistoryDetailModal\n    }, \"DailyTaskHistoryList\"), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.daily_task_history_load,\n      onClick: loadNextHistory,\n      children: /*#__PURE__*/_jsx(\"i\", {\n        className: \"fa fa-arrow-circle-down faa-wrench animated-hover\"\n      })\n    })]\n  });\n};\n\nfunction getDailyTaskHistoryList(_x) {\n  return _getDailyTaskHistoryList.apply(this, arguments);\n}\n\nfunction _getDailyTaskHistoryList() {\n  _getDailyTaskHistoryList = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(date) {\n    var dateStr, dailyTaskHistoryList, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dateStr = DatePickerUtil.dateStrYYYYMMDD(date);\n            dailyTaskHistoryList = new Array();\n            _context.prev = 2;\n            _context.next = 5;\n            return getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n              params: {\n                nextTargetDate: dateStr\n              }\n            });\n\n          case 5:\n            res = _context.sent;\n            dailyTaskHistoryList = createDailyTaskHistoryList(res.data);\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n            Router.push('/Error?400');\n\n          case 12:\n            return _context.abrupt(\"return\", dailyTaskHistoryList);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _getDailyTaskHistoryList.apply(this, arguments);\n}\n\nfunction createDailyTaskHistoryList(responseData) {\n  var outerLength = responseData.length;\n  var dailyTaskHistoryList = [];\n\n  for (var i = 0; i < outerLength; i++) {\n    var tempList = responseData[i];\n    var innerLength = tempList.length;\n    dailyTaskHistoryList[i] = new Array();\n\n    for (var j = 0; j < innerLength; j++) {\n      var dailyTaskHistory = new DailyTaskHistory(responseData[i][j][\"dailyTaskId\"], responseData[i][j][\"title\"], responseData[i][j][\"doneDate\"], responseData[i][j][\"doneTime\"], responseData[i][j][\"quota\"], responseData[i][j][\"doneFlg\"]);\n      dailyTaskHistoryList[i].push(dailyTaskHistory);\n    }\n  }\n\n  return dailyTaskHistoryList;\n}\n\nexport default DailyTaskHistoryBoard;","map":null,"metadata":{},"sourceType":"module"}