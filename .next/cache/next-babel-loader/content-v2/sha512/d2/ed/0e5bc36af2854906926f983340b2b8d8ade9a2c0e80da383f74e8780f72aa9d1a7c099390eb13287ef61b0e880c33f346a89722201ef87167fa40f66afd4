{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"/Users/shumiya/Desktop/dev/react/shumipro_front/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/TaskEditModal.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Form, Row, Col } from 'react-bootstrap';\nimport Axios from \"axios\";\nimport Router from 'next/router';\nimport DatePicker, { registerLocale, moment } from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport ja from 'date-fns/locale/ja';\nimport * as DatePickerUtil from './DatePickerUtil';\nregisterLocale('ja', ja);\n\nvar TaskEditModal = function TaskEditModal(props) {\n  _s();\n\n  var initDate = DatePickerUtil.toUtcIso8601str(moment());\n\n  var _useState = useState({\n    id: -1,\n    task: \"\",\n    priority: 1,\n    description: \"\",\n    status: 1,\n    date: initDate\n  }),\n      form = _useState[0],\n      setForm = _useState[1]; // 初期表示処理\n\n\n  useEffect(function () {\n    if (props.task != null) {\n      setForm({\n        id: props.task.id,\n        task: props.task.taskTitle,\n        priority: props.task.priority,\n        description: props.task.description,\n        status: props.task.status,\n        date: initDate\n      });\n    }\n  }, []); // form入力のハンドリング\n\n  var handleChange = function handleChange(input) {\n    return function (e) {\n      return setForm(_objectSpread(_objectSpread({}, form), {}, _defineProperty({}, input, e.target.value)));\n    };\n  };\n\n  var handleChangeDate = function handleChangeDate(date) {\n    setForm({\n      id: form.id,\n      task: form.task,\n      priority: form.priority,\n      description: form.description,\n      status: form.status,\n      date: DatePickerUtil.toUtcIso8601str(moment(date))\n    });\n  }; // cookieを使用するaxios生成\n\n\n  var client = Axios.create({\n    withCredentials: true\n  }); // executeボタン押下処理\n\n  var clickExecute = function clickExecute() {\n    execute();\n  }; // リクエスト用json取得\n\n\n  var getJsonParams = function getJsonParams() {\n    var params = {\n      task: form.task,\n      priority: form.priority,\n      status: form.status,\n      description: form.description\n    };\n    return JSON.stringify(params);\n  }; // task登録\n\n\n  var create = function create() {\n    var jsonParams = getJsonParams();\n    client.post(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK, jsonParams, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(function (response) {\n      props.setInitDispFlg(true);\n      props.close();\n    })[\"catch\"](function () {\n      Router.push('/Error?400');\n    });\n  }; // task更新\n\n\n  var update = function update() {\n    var jsonParams = getJsonParams();\n    client.put(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK + \"/\" + props.task.id, jsonParams, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(function (response) {\n      props.setInitDispFlg(true);\n      props.close();\n    })[\"catch\"](function () {\n      Router.push('/Error?400');\n    });\n  }; // タイトル表示文字列設定\n\n\n  var title;\n  var execute;\n\n  switch (props.execSbt) {\n    case \"1\":\n      title = 'Create task';\n      execute = create;\n      break;\n\n    case \"2\":\n      title = 'Update task';\n      execute = update;\n      break;\n  } // 日付表示文字列設定\n\n\n  var dateTitleStr;\n\n  switch (form.status) {\n    case 1:\n    case 2:\n      dateTitleStr = 'Plan Date';\n      break;\n\n    case 3:\n      dateTitleStr = 'Done Date';\n      break;\n  }\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    show: true,\n    onHide: props.close,\n    children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n        children: title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n      children: /*#__PURE__*/_jsxDEV(Form, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Task\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              value: form.task,\n              onChange: handleChange('task')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 33\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              value: form.status,\n              onChange: handleChange('status'),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"NOT STARTED\"\n              }, \"status1\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 148,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"IN PROGRESS\"\n              }, \"status2\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 149,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"DONE\"\n              }, \"status3\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Priority\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"select\",\n              value: form.priority,\n              onChange: handleChange('priority'),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"1\",\n                children: \"LOW\"\n              }, \"priority1\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"2\",\n                children: \"MEDIUM\"\n              }, \"priority2\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"3\",\n                children: \"HIGH\"\n              }, \"priority3\", false, {\n                fileName: _jsxFileName,\n                lineNumber: 161,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: form.status == 3 ? \"Done Date\" : \"Plan Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 166,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(DatePicker, {\n              locale: \"ja\",\n              selected: moment(form.date).toDate(),\n              onChange: handleChangeDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: form.status == 3 ? \"Done Date\" : \"Plan Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: [/*#__PURE__*/_jsxDEV(Col, {\n                xs: 4,\n                className: \"display_flex\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"number\",\n                  min: \"1900\",\n                  className: \"modal_input_year\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"modal_input_date_delimiter\",\n                  children: \"/\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 108\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: 3,\n                className: \"display_flex\",\n                children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"number\",\n                  min: \"1\",\n                  max: \"12\",\n                  className: \"modal_input_month\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 37\n                }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"modal_input_date_delimiter\",\n                  children: \"/\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 114\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, _this), /*#__PURE__*/_jsxDEV(Col, {\n                xs: 3,\n                className: \"display_flex\",\n                children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"number\",\n                  min: \"1\",\n                  max: \"31\",\n                  className: \"modal_input_day\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 33\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 29\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 25\n          }, _this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              as: \"textarea\",\n              rows: 2,\n              cols: 40,\n              value: form.description,\n              onChange: handleChange('description')\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 33\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 25\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        onClick: clickExecute,\n        className: \"button_sm\",\n        children: \"execute\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 16\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"dark\",\n        onClick: props.close,\n        className: \"button_sm\",\n        children: \"close\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 17\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 13\n    }, _this)]\n  }, 'taskEditModal', true, {\n    fileName: _jsxFileName,\n    lineNumber: 129,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(TaskEditModal, \"rwRulUXuyusLK2Vi7n0dR6MBFVs=\");\n\n_c = TaskEditModal;\nexport default TaskEditModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"TaskEditModal\");","map":{"version":3,"sources":["/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/TaskEditModal.tsx"],"names":["React","useState","useEffect","Modal","Button","Form","Row","Col","Axios","Router","DatePicker","registerLocale","moment","ja","DatePickerUtil","TaskEditModal","props","initDate","toUtcIso8601str","id","task","priority","description","status","date","form","setForm","taskTitle","handleChange","input","e","target","value","handleChangeDate","client","create","withCredentials","clickExecute","execute","getJsonParams","params","JSON","stringify","jsonParams","post","process","env","NEXT_PUBLIC_API_SERVER","NEXT_PUBLIC_API_TASK","headers","then","response","setInitDispFlg","close","push","update","put","title","execSbt","dateTitleStr","toDate"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useState, useEffect } from 'react';\nimport {Modal, Button, Form, Row, Col} from 'react-bootstrap';\nimport Axios from \"axios\";\nimport Router from 'next/router';\nimport { Task } from '../components/interface';\nimport DatePicker, { registerLocale, moment } from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport ja from 'date-fns/locale/ja';\nimport * as DatePickerUtil from './DatePickerUtil';\n\nregisterLocale('ja', ja)\n\n\ninterface TaskEditModalProps {\n    close: () => void;\n    execSbt: string;\n    setInitDispFlg: Dispatch<SetStateAction<Boolean>>;\n    task: Task;\n}\n\n\nconst TaskEditModal: React.FC<TaskEditModalProps> = (props) => {\n    const initDate = DatePickerUtil.toUtcIso8601str(moment())\n    const [form, setForm] = useState({id: -1, task: \"\", priority: 1, description: \"\", status: 1, date: initDate});\n　　\n    // 初期表示処理\n    useEffect(() => {\n        if (props.task != null) {\n            setForm({id: props.task.id\n                    , task: props.task.taskTitle\n                    , priority: props.task.priority\n                    , description: props.task.description\n                    , status: props.task.status\n                    , date: initDate});\n        }\n    }, []);\n\n    // form入力のハンドリング\n    const handleChange = (input) => {\n        return e => setForm({...form, [input]: e.target.value})\n    }\n    \n    const handleChangeDate = (date) => {\n        setForm({id: form.id\n            , task: form.task\n            , priority: form.priority\n            , description: form.description\n            , status: form.status\n            , date: DatePickerUtil.toUtcIso8601str(moment(date))});\n    }\n\n    // cookieを使用するaxios生成\n    let client = Axios.create({ withCredentials: true });\n\n    // executeボタン押下処理\n    const clickExecute = () => {\n        execute();\n    }\n\n    // リクエスト用json取得\n    const getJsonParams = () => {\n        var params = {\n            task: form.task,\n            priority: form.priority,\n            status: form.status,\n            description: form.description\n        }\n        \n        return JSON.stringify(params);\n    }\n\n    // task登録\n    const create = () => {\n        var jsonParams = getJsonParams();\n    \n        client.post(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK\n            , jsonParams\n            , {headers: {'content-type': 'application/json'}})\n        .then( response => {\n            props.setInitDispFlg(true);\n            props.close();\n        }).catch(() => {\n            Router.push('/Error?400');\n        })\n    }\n\n    // task更新\n    const update = () => {\n        var jsonParams = getJsonParams();\n    \n        client.put(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK + \"/\" + props.task.id\n            , jsonParams\n            , {headers: {'content-type': 'application/json'}})\n        .then( response => {\n            props.setInitDispFlg(true);\n            props.close();\n        }).catch(() => {\n            Router.push('/Error?400');\n        })\n    }\n\n    // タイトル表示文字列設定\n    let title: string;\n    let execute: () => void;\n    switch(props.execSbt) {\n        case \"1\":\n            title = 'Create task';\n            execute = create;\n            break;\n        case \"2\":\n            title = 'Update task';\n            execute = update;\n            break;\n    }\n\n    // 日付表示文字列設定\n    let dateTitleStr: string;\n    switch(form.status){\n        case 1:\n        case 2:\n            dateTitleStr = 'Plan Date';\n            break;\n        case 3:\n            dateTitleStr = 'Done Date';\n            break;\n    }\n\n    return (\n        <Modal show={true} onHide={props.close} key='taskEditModal'>\n            <Modal.Header closeButton>\n                <Modal.Title>{title}</Modal.Title>\n            </Modal.Header>\n            <Modal.Body>\n                <Form>\n                    <Row>\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>Task</strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                                <Form.Control type=\"text\" value={form.task} onChange={handleChange('task')} />\n                        </Col>\n                        <hr />\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>Status</strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                            <Form.Control as=\"select\" value={form.status} onChange={handleChange('status')}>\n                                <option key=\"status1\" value=\"1\">NOT STARTED</option>\n                                <option key=\"status2\" value=\"2\">IN PROGRESS</option>\n                                <option key=\"status3\" value=\"3\">DONE</option>\n                            </Form.Control>\n                        </Col>\n                        <hr />\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>Priority</strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                            <Form.Control as=\"select\" value={form.priority} onChange={handleChange('priority')}>\n                                <option key=\"priority1\" value=\"1\">LOW</option>\n                                <option key=\"priority2\" value=\"2\">MEDIUM</option>\n                                <option key=\"priority3\" value=\"3\">HIGH</option>\n                            </Form.Control>\n                        </Col>\n                        <hr />\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>\n                                {\n                                    form.status == 3 ?\n                                        (\"Done Date\")\n                                        : (\"Plan Date\")\n                                }\n                            </strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                            <DatePicker\n                                locale=\"ja\"\n                                selected={moment(form.date).toDate()}\n                                onChange={handleChangeDate}\n                            />\n                        </Col>\n                        <hr />\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>\n                                {\n                                    form.status == 3 ?\n                                        (\"Done Date\")\n                                        : (\"Plan Date\")\n                                }\n                            </strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                            <Row>\n                                <Col xs={4} className=\"display_flex\">\n                                    <Form.Control type=\"number\" min=\"1900\"  className=\"modal_input_year\" /><p className=\"modal_input_date_delimiter\">/</p>\n                                </Col>\n                                <Col xs={3} className=\"display_flex\">\n                                    <Form.Control type=\"number\" min=\"1\" max=\"12\" className=\"modal_input_month\" /><p className=\"modal_input_date_delimiter\">/</p>\n                                </Col>\n                                <Col xs={3} className=\"display_flex\">\n                                    <Form.Control type=\"number\" min=\"1\" max=\"31\" className=\"modal_input_day\" />\n                                </Col>\n                            </Row>\n                        </Col>\n                        <hr />\n                        <Col xs={4} className=\"modal_label\">\n                            <strong>Description</strong>\n                        </Col>\n                        <Col xs={8} className=\"modal_input\">\n                                <Form.Control as=\"textarea\" rows={2} cols={40} value={form.description} onChange={handleChange('description')} />\n                        </Col>\n                    </Row>\n                </Form>\n            </Modal.Body>\n            <Modal.Footer>\n               <Button variant=\"primary\" onClick={clickExecute} className=\"button_sm\" >execute</Button>\n                <Button variant=\"dark\" onClick={props.close} className=\"button_sm\" >close</Button>\n            </Modal.Footer>\n        </Modal>\n    )\n}\n\nexport default TaskEditModal;"]},"metadata":{},"sourceType":"module"}