{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Modal, Button, Form, Row, Col } from 'react-bootstrap';\nimport { getApiClient } from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as NumberUtil from '../util/NumberUtil';\n\nconst DailyTaskEditModal = props => {\n  const {\n    0: form,\n    1: setForm\n  } = useState({\n    id: -1,\n    title: \"\",\n    description: \"\",\n    priority: 1,\n    quota: \"\",\n    deleteFlg: 0\n  }); // 初期表示処理\n\n  useEffect(() => {\n    if (props.dailyTask != null) {\n      setForm({\n        id: props.dailyTask.id,\n        title: props.dailyTask.title,\n        description: props.dailyTask.description,\n        priority: props.dailyTask.priority,\n        quota: props.dailyTask.quota.toString(),\n        deleteFlg: props.dailyTask.deleteFlg\n      });\n    }\n  }, []); // form入力のハンドリング\n\n  const handleChange = input => {\n    return e => setForm(_objectSpread(_objectSpread({}, form), {}, {\n      [input]: e.target.value\n    }));\n  }; // cookieを使用するaxios生成\n\n\n  let client = getApiClient(); // executeボタン押下処理\n\n  const clickExecute = () => {\n    execute();\n  }; // リクエスト用json取得\n\n\n  const getJsonParams = () => {\n    var params = {\n      title: form.title,\n      description: form.description,\n      priority: form.priority,\n      quota: form.quota,\n      deleteFlg: form.deleteFlg,\n      createDate: props.dailyTask == null ? \"\" : props.dailyTask.createDate,\n      deleteDate: props.dailyTask == null ? \"\" : props.dailyTask.deleteDate\n    };\n    return JSON.stringify(params);\n  };\n\n  const validate = () => {\n    if (form.title == \"\") return false;\n    if (form.quota == \"\" || !NumberUtil.isNumber(form.quota)) return false;\n    return true;\n  }; // task登録\n\n\n  const create = () => {\n    if (!validate()) {\n      return false;\n    }\n\n    var jsonParams = getJsonParams();\n    client.post(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_DAILY_TASK, jsonParams, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(() => {\n      props.setInitDispFlg(true);\n      props.close();\n    }).catch(() => {\n      Router.push('/Error?400');\n    });\n  }; // task更新\n\n\n  const update = () => {\n    if (!validate()) {\n      return false;\n    }\n\n    var jsonParams = getJsonParams();\n    client.put(process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_DAILY_TASK + \"/\" + props.dailyTask.id, jsonParams, {\n      headers: {\n        'content-type': 'application/json'\n      }\n    }).then(() => {\n      props.setInitDispFlg(true);\n      props.close();\n    }).catch(() => {\n      Router.push('/Error?400');\n    });\n  }; // 登録or更新判定\n\n\n  let title;\n  let execute;\n\n  if (props.dailyTask == null) {\n    title = 'Create Daily Task';\n    execute = create;\n  } else {\n    title = 'Update Daily Task';\n    execute = update;\n  }\n\n  return /*#__PURE__*/_jsxs(Modal, {\n    show: true,\n    onHide: props.close,\n    children: [/*#__PURE__*/_jsx(Modal.Header, {\n      closeButton: true,\n      children: /*#__PURE__*/_jsx(Modal.Title, {\n        children: title\n      })\n    }), /*#__PURE__*/_jsx(Modal.Body, {\n      children: /*#__PURE__*/_jsx(Form, {\n        children: /*#__PURE__*/_jsxs(Row, {\n          children: [/*#__PURE__*/_jsx(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Title\"\n            })\n          }), /*#__PURE__*/_jsx(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsx(Form.Control, {\n              type: \"text\",\n              value: form.title,\n              onChange: handleChange('title')\n            })\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Description\"\n            })\n          }), /*#__PURE__*/_jsx(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsx(Form.Control, {\n              as: \"textarea\",\n              rows: 2,\n              cols: 40,\n              value: form.description,\n              onChange: handleChange('description')\n            })\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Priority\"\n            })\n          }), /*#__PURE__*/_jsx(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: /*#__PURE__*/_jsxs(Form.Control, {\n              as: \"select\",\n              value: form.priority,\n              onChange: handleChange('priority'),\n              children: [/*#__PURE__*/_jsx(\"option\", {\n                value: \"1\",\n                children: \"LOW\"\n              }, \"priority1\"), /*#__PURE__*/_jsx(\"option\", {\n                value: \"2\",\n                children: \"MEDIUM\"\n              }, \"priority2\"), /*#__PURE__*/_jsx(\"option\", {\n                value: \"3\",\n                children: \"HIGH\"\n              }, \"priority3\")]\n            })\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Quota\"\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            xs: 8,\n            className: \"modal_input\",\n            children: [/*#__PURE__*/_jsx(Form.Control, {\n              type: \"text\",\n              className: \"modal_input_num display_inline\",\n              value: form.quota,\n              onChange: handleChange('quota')\n            }), \" m\"]\n          }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n            xs: 4,\n            className: \"modal_label\",\n            children: /*#__PURE__*/_jsx(\"strong\", {\n              children: \"Delete Flg\"\n            })\n          }), /*#__PURE__*/_jsxs(Col, {\n            xs: 8,\n            className: \"modal_input padding_top_10\",\n            children: [/*#__PURE__*/_jsx(Form.Check, {\n              inline: true,\n              type: \"radio\",\n              id: \"deleteFlg_ON\",\n              name: \"deleteFlg\",\n              checked: form.deleteFlg == 1,\n              value: \"1\",\n              label: \"ON\",\n              onChange: handleChange('deleteFlg')\n            }), /*#__PURE__*/_jsx(Form.Check, {\n              inline: true,\n              type: \"radio\",\n              id: \"deleteFlg_OFF\",\n              name: \"deleteFlg\",\n              checked: form.deleteFlg == 0,\n              value: \"0\",\n              label: \"OFF\",\n              onChange: handleChange('deleteFlg')\n            })]\n          }), props.dailyTask != null && /*#__PURE__*/_jsxs(React.Fragment, {\n            children: [/*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n              xs: 4,\n              className: \"modal_label\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Create Date\"\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              xs: 8,\n              className: \"modal_input padding_top_10\",\n              children: props.dailyTask.createDate\n            }), /*#__PURE__*/_jsx(\"hr\", {}), /*#__PURE__*/_jsx(Col, {\n              xs: 4,\n              className: \"modal_label\",\n              children: /*#__PURE__*/_jsx(\"strong\", {\n                children: \"Delete Date\"\n              })\n            }), /*#__PURE__*/_jsx(Col, {\n              xs: 8,\n              className: \"modal_input padding_top_10\",\n              children: props.dailyTask.deleteDate != \"\" ? props.dailyTask.deleteDate : \"-\"\n            })]\n          })]\n        })\n      })\n    }), /*#__PURE__*/_jsxs(Modal.Footer, {\n      children: [/*#__PURE__*/_jsx(Button, {\n        variant: \"primary\",\n        onClick: clickExecute,\n        className: \"button_sm\",\n        children: \"execute\"\n      }), /*#__PURE__*/_jsx(Button, {\n        variant: \"dark\",\n        onClick: props.close,\n        className: \"button_sm\",\n        children: \"close\"\n      })]\n    })]\n  }, 'dailyTaskEditModal');\n};\n\nexport default DailyTaskEditModal;","map":null,"metadata":{},"sourceType":"module"}