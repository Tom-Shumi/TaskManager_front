{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport styles from '../../styles/TaskComment.module.css';\nimport { Form } from 'react-bootstrap';\nimport Router from 'next/router';\nimport { getApiClient } from '../util/AuthenticationUtil';\n\nconst TaskComment = props => {\n  const {\n    0: updateFlg,\n    1: setUpdateFlg\n  } = useState(false);\n  const {\n    0: inputComment,\n    1: setInputComment\n  } = useState(props.taskComment.comment); // cookieを使用するaxios生成\n\n  let client = getApiClient();\n\n  const handleChangeInputComment = () => {\n    return e => setInputComment(e.target.value);\n  };\n\n  const cancelTaskCommentEdit = () => {\n    setUpdateFlg(false);\n  };\n\n  const deleteTaskComment = () => {\n    if (confirm(\"Do you want to delete it?\")) {\n      client.delete(`${process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK_COMMENT}/${props.taskComment.taskId}/${props.taskComment.id}`).then(response => {\n        props.setInitDispFlg(true);\n      }).catch(() => {\n        Router.push('/Error?400');\n      });\n    }\n  };\n\n  const updateTaskComment = () => {\n    if (updateFlg) {\n      var params = {\n        comment: inputComment\n      };\n      var jsonParams = JSON.stringify(params);\n      client.put(`${process.env.NEXT_PUBLIC_API_SERVER + process.env.NEXT_PUBLIC_API_TASK_COMMENT}/${props.taskComment.taskId}/${props.taskComment.id}`, jsonParams, {\n        headers: {\n          'content-type': 'application/json'\n        }\n      }).then(response => {\n        props.setInitDispFlg(true);\n        setUpdateFlg(false);\n      }).catch(() => {\n        Router.push('/Error?400');\n      });\n    } else {\n      setUpdateFlg(true);\n    }\n  };\n\n  let comment = [];\n\n  if (updateFlg) {\n    comment.push( /*#__PURE__*/_jsx(\"div\", {\n      className: styles.task_comment_cancel_icon,\n      children: /*#__PURE__*/_jsx(\"i\", {\n        onClick: cancelTaskCommentEdit,\n        className: \"fa fa-times faa-wrench animated-hover\"\n      })\n    }, \"commentCancel\" + props.taskComment.id));\n    comment.push( /*#__PURE__*/_jsx(Form.Control, {\n      as: \"textarea\",\n      rows: 2,\n      cols: 40,\n      value: inputComment,\n      onChange: handleChangeInputComment()\n    }, \"comment\" + props.taskComment.id));\n  } else {\n    comment.push(props.taskComment.comment);\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.task_comment,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      children: [comment, /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.task_comment_icons,\n        children: [/*#__PURE__*/_jsx(\"div\", {\n          className: styles.task_comment_icon,\n          children: /*#__PURE__*/_jsx(\"i\", {\n            onClick: updateTaskComment,\n            className: \"fa fa-edit faa-wrench animated-hover\"\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: styles.task_comment_icon,\n          children: /*#__PURE__*/_jsx(\"i\", {\n            onClick: deleteTaskComment,\n            className: \"fa fa-trash faa-wrench animated-hover\"\n          })\n        })]\n      })]\n    })\n  });\n};\n\nexport default TaskComment;","map":null,"metadata":{},"sourceType":"module"}