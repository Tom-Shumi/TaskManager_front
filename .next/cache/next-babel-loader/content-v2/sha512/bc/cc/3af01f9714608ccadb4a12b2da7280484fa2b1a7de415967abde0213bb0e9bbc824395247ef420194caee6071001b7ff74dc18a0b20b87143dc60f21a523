{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/DailyTask/DailyTaskBoard.tsx\";\nimport React, { useState, useEffect } from 'react';\nimport DailyTaskList from './DailyTaskList';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { DailyTask } from '../common/interface';\nimport { getApiClient } from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport * as NumberUtil from '../util/NumberUtil';\n\nconst DailyTaskBoard = props => {\n  // デイリータスク\n  const {\n    0: dailyTaskList,\n    1: setDailyTaskList\n  } = useState([]);\n  useEffect(() => {\n    props.setInitDispFlg(false);\n    callGetDailyTaskList();\n  }, [props.initDispFlg]);\n\n  const callGetDailyTaskList = () => {\n    var res = getDailyTaskList();\n    res.then(ret => setDailyTaskList(ret));\n    let doneTaskCount = 0;\n    let totalDoneTime = 0;\n\n    for (var i = 0; i < dailyTaskList.length; i++) {\n      if (dailyTaskList[i].quota <= dailyTaskList[i].doneTime) {\n        doneTaskCount++;\n      }\n\n      totalDoneTime += dailyTaskList[i].doneTime;\n    }\n\n    props.setTotalTaskCount(dailyTaskList.length);\n    props.setDoneTaskCount(doneTaskCount);\n    props.setTotalDoneTime(NumberUtil.convertHourMinute(totalDoneTime));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(DndProvider, {\n      backend: HTML5Backend,\n      children: /*#__PURE__*/_jsxDEV(DailyTaskList, {\n        dailyTaskList: dailyTaskList,\n        setInitDispFlg: props.setInitDispFlg\n      }, \"DailyTaskList\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n\nasync function getDailyTaskList() {\n  var dailyTaskList = [];\n\n  try {\n    const res = await getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK);\n    dailyTaskList = createDailyTaskList(res.data);\n  } catch (error) {\n    Router.push('/Error?400');\n  }\n\n  return dailyTaskList;\n}\n\nfunction createDailyTaskList(responseData) {\n  let length = responseData.length;\n  var dailyTaskList = [];\n\n  for (var i = 0; i < length; i++) {\n    let dailyTask = new DailyTask(responseData[i][\"id\"], responseData[i][\"username\"], responseData[i][\"title\"], responseData[i][\"description\"], responseData[i][\"priority\"], responseData[i][\"quota\"], responseData[i][\"deleteFlg\"], responseData[i][\"createDate\"], responseData[i][\"doneDate\"], responseData[i][\"doneTime\"]);\n    dailyTaskList.push(dailyTask);\n  }\n\n  return dailyTaskList;\n}\n\nexport default DailyTaskBoard;","map":{"version":3,"sources":["/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/DailyTask/DailyTaskBoard.tsx"],"names":["React","useState","useEffect","DailyTaskList","DndProvider","HTML5Backend","DailyTask","getApiClient","Router","NumberUtil","DailyTaskBoard","props","dailyTaskList","setDailyTaskList","setInitDispFlg","callGetDailyTaskList","initDispFlg","res","getDailyTaskList","then","ret","doneTaskCount","totalDoneTime","i","length","quota","doneTime","setTotalTaskCount","setDoneTaskCount","setTotalDoneTime","convertHourMinute","get","process","env","NEXT_PUBLIC_API_DAILY_TASK","createDailyTaskList","data","error","push","responseData","dailyTask"],"mappings":";;AAAA,OAAOA,KAAP,IAA0CC,QAA1C,EAAoDC,SAApD,QAAoE,OAApE;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,SAASC,WAAT,QAA4B,WAA5B;AACA,SAAQC,YAAR,QAA2B,yBAA3B;AACA,SAASC,SAAT,QAA0B,qBAA1B;AACA,SAAQC,YAAR,QAA2B,4BAA3B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAO,KAAKC,UAAZ,MAA4B,oBAA5B;;AAWA,MAAMC,cAA6C,GAAIC,KAAD,IAAW;AAC7D;AACA,QAAM;AAAA,OAACC,aAAD;AAAA,OAAgBC;AAAhB,MAAoCZ,QAAQ,CAAc,EAAd,CAAlD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,KAAK,CAACG,cAAN,CAAqB,KAArB;AACAC,IAAAA,oBAAoB;AACvB,GAHQ,EAGN,CAACJ,KAAK,CAACK,WAAP,CAHM,CAAT;;AAKA,QAAMD,oBAAoB,GAAG,MAAM;AAC/B,QAAIE,GAAyB,GAAGC,gBAAgB,EAAhD;AACAD,IAAAA,GAAG,CAACE,IAAJ,CAASC,GAAG,IAAIP,gBAAgB,CAACO,GAAD,CAAhC;AAEA,QAAIC,aAAa,GAAG,CAApB;AACA,QAAIC,aAAa,GAAG,CAApB;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAiBA,CAAC,GAAGX,aAAa,CAACY,MAAnC,EAA4CD,CAAC,EAA7C,EAAiD;AAC7C,UAAIX,aAAa,CAACW,CAAD,CAAb,CAAiBE,KAAjB,IAA0Bb,aAAa,CAACW,CAAD,CAAb,CAAiBG,QAA/C,EAAyD;AACrDL,QAAAA,aAAa;AAChB;;AACDC,MAAAA,aAAa,IAAIV,aAAa,CAACW,CAAD,CAAb,CAAiBG,QAAlC;AACH;;AACDf,IAAAA,KAAK,CAACgB,iBAAN,CAAwBf,aAAa,CAACY,MAAtC;AACAb,IAAAA,KAAK,CAACiB,gBAAN,CAAuBP,aAAvB;AACAV,IAAAA,KAAK,CAACkB,gBAAN,CAAuBpB,UAAU,CAACqB,iBAAX,CAA6BR,aAA7B,CAAvB;AACH,GAfD;;AAiBA,sBACI;AAAA,2BACI,QAAC,WAAD;AAAa,MAAA,OAAO,EAAEjB,YAAtB;AAAA,6BACI,QAAC,aAAD;AAAmC,QAAA,aAAa,EAAEO,aAAlD;AAAiE,QAAA,cAAc,EAAED,KAAK,CAACG;AAAvF,SAAmB,eAAnB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAOH,CAjCD;;AAmCA,eAAeI,gBAAf,GAAiC;AAC7B,MAAIN,aAA2B,GAAG,EAAlC;;AAEA,MAAI;AACA,UAAMK,GAAG,GAAG,MAAMV,YAAY,GAAGwB,GAAf,CAAmBC,OAAO,CAACC,GAAR,CAAYC,0BAA/B,CAAlB;AACAtB,IAAAA,aAAa,GAAGuB,mBAAmB,CAAClB,GAAG,CAACmB,IAAL,CAAnC;AACH,GAHD,CAGE,OAAMC,KAAN,EAAY;AACV7B,IAAAA,MAAM,CAAC8B,IAAP,CAAY,YAAZ;AACH;;AACD,SAAO1B,aAAP;AACH;;AAED,SAASuB,mBAAT,CAA6BI,YAA7B,EAA8D;AAC1D,MAAIf,MAAc,GAAGe,YAAY,CAACf,MAAlC;AACA,MAAIZ,aAA0B,GAAG,EAAjC;;AAEA,OAAK,IAAIW,CAAC,GAAG,CAAb,EAAiBA,CAAC,GAAGC,MAArB,EAA8BD,CAAC,EAA/B,EAAmC;AAE/B,QAAIiB,SAAS,GAAG,IAAIlC,SAAJ,CAAciC,YAAY,CAAChB,CAAD,CAAZ,CAAgB,IAAhB,CAAd,EAAqCgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,UAAhB,CAArC,EAChBgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,OAAhB,CADgB,EACUgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,aAAhB,CADV,EAC0CgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,UAAhB,CAD1C,EAEhBgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,OAAhB,CAFgB,EAEUgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,WAAhB,CAFV,EAEwCgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,YAAhB,CAFxC,EAGhBgB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,UAAhB,CAHgB,EAGagB,YAAY,CAAChB,CAAD,CAAZ,CAAgB,UAAhB,CAHb,CAAhB;AAKAX,IAAAA,aAAa,CAAC0B,IAAd,CAAmBE,SAAnB;AACH;;AAED,SAAO5B,aAAP;AACH;;AAED,eAAeF,cAAf","sourcesContent":["import React, { Dispatch, SetStateAction, useState, useEffect} from 'react';\nimport DailyTaskList from './DailyTaskList';\nimport { DndProvider } from 'react-dnd';\nimport {HTML5Backend} from 'react-dnd-html5-backend';\nimport { DailyTask } from '../common/interface';\nimport {getApiClient} from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport * as NumberUtil from '../util/NumberUtil';\n\ninterface DailyTaskBoardProps {\n    initDispFlg: Boolean;\n    includeDeleteFlg: number;\n    setInitDispFlg: Dispatch<SetStateAction<Boolean>>;\n    setTotalTaskCount: Dispatch<SetStateAction<number>>;\n    setDoneTaskCount: Dispatch<SetStateAction<number>>;\n    setTotalDoneTime: Dispatch<SetStateAction<string>>;\n}\n\nconst DailyTaskBoard: React.FC<DailyTaskBoardProps> = (props) => {\n    // デイリータスク\n    const [dailyTaskList, setDailyTaskList] = useState<DailyTask[]>([]);\n \n    useEffect(() => {\n        props.setInitDispFlg(false);\n        callGetDailyTaskList();\n    }, [props.initDispFlg]);\n\n    const callGetDailyTaskList = () => {\n        var res: Promise<DailyTask[]> = getDailyTaskList();\n        res.then(ret => setDailyTaskList(ret));\n\n        let doneTaskCount = 0;\n        let totalDoneTime = 0;\n        for (var i = 0 ; i < dailyTaskList.length ; i++) {\n            if (dailyTaskList[i].quota <= dailyTaskList[i].doneTime) {\n                doneTaskCount++;\n            }\n            totalDoneTime += dailyTaskList[i].doneTime\n        }\n        props.setTotalTaskCount(dailyTaskList.length);\n        props.setDoneTaskCount(doneTaskCount);\n        props.setTotalDoneTime(NumberUtil.convertHourMinute(totalDoneTime));\n    }\n\n    return (\n        <div>\n            <DndProvider backend={HTML5Backend}>\n                <DailyTaskList key=\"DailyTaskList\" dailyTaskList={dailyTaskList} setInitDispFlg={props.setInitDispFlg}/>\n            </DndProvider>\n        </div>\n    )\n}\n\nasync function getDailyTaskList(){\n    var dailyTaskList : DailyTask[] = [];\n\n    try {\n        const res = await getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK);\n        dailyTaskList = createDailyTaskList(res.data);\n    } catch(error){\n        Router.push('/Error?400');\n    }\n    return dailyTaskList;\n}\n\nfunction createDailyTaskList(responseData: any[]): DailyTask[]{\n    let length: number = responseData.length;\n    var dailyTaskList :DailyTask[] = [];\n\n    for (var i = 0 ; i < length ; i++) {\n\n        let dailyTask = new DailyTask(responseData[i][\"id\"], responseData[i][\"username\"], \n        responseData[i][\"title\"], responseData[i][\"description\"], responseData[i][\"priority\"], \n        responseData[i][\"quota\"], responseData[i][\"deleteFlg\"], responseData[i][\"createDate\"],\n        responseData[i][\"doneDate\"], responseData[i][\"doneTime\"]);\n\n        dailyTaskList.push(dailyTask);\n    }\n\n    return dailyTaskList;\n}\n\nexport default DailyTaskBoard;"]},"metadata":{},"sourceType":"module"}