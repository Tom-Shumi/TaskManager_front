{"ast":null,"code":"import _regeneratorRuntime from \"/Users/shumiya/Desktop/dev/react/shumipro_front/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/shumiya/Desktop/dev/react/shumipro_front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _toConsumableArray from \"/Users/shumiya/Desktop/dev/react/shumipro_front/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _jsxFileName = \"/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/DailyTaskHistory/DailyTaskHistoryBoard.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport DailyTaskHistoryList from './DailyTaskHistoryList';\nimport { DailyTaskHistory } from '../common/interface';\nimport { getApiClient } from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport * as DatePickerUtil from '../util/DatePickerUtil';\nimport styles from '../../styles/DailyTaskHistoryBoard.module.css';\n\nvar DailyTaskHistoryBoard = function DailyTaskHistoryBoard(props) {\n  _s();\n\n  var _useState = useState([]),\n      dailyTaskHistoryList = _useState[0],\n      setDailyTaskHistoryList = _useState[1];\n\n  useEffect(function () {\n    callGetDailyTaskHistoryList();\n  }, []);\n\n  var callGetDailyTaskHistoryList = function callGetDailyTaskHistoryList() {\n    var res = getDailyTaskHistoryList(props.targetDate);\n    res.then(function (ret) {\n      setDailyTaskHistoryList(ret);\n    });\n  };\n\n  var loadNextHistory = function loadNextHistory() {\n    var nextTargetDate = new Date(props.targetDate);\n    var diff = targetDateDiff - 5;\n    nextTargetDate.setDate(nextTargetDate.getDate() - 5);\n\n    try {\n      getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n        params: {\n          nextTargetDate: DatePickerUtil.dateStrYYYYMMDD(nextTargetDate)\n        }\n      }).then(function (res) {\n        var taskCommentList = createDailyTaskHistoryList(res.data);\n        setDailyTaskHistoryList([].concat(_toConsumableArray(dailyTaskHistoryList), _toConsumableArray(taskCommentList)));\n        props.setTargetDateDiff(nextTargetDate);\n      });\n    } catch (error) {\n      Router.push('/Error?400');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(DailyTaskHistoryList, {\n      dailyTaskHistoryList: dailyTaskHistoryList,\n      targetDate: props.targetDate\n    }, \"DailyTaskHistoryList\", false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.daily_task_history_load,\n      onClick: loadNextHistory,\n      children: /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"fa fa-arrow-circle-down faa-wrench animated-hover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 87\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 9\n  }, _this);\n};\n\n_s(DailyTaskHistoryBoard, \"2EBrC7q888oT2ujUMH2PcI1ZPaw=\");\n\n_c = DailyTaskHistoryBoard;\n\nfunction getDailyTaskHistoryList(_x) {\n  return _getDailyTaskHistoryList.apply(this, arguments);\n}\n\nfunction _getDailyTaskHistoryList() {\n  _getDailyTaskHistoryList = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(date) {\n    var dateStr, dailyTaskHistoryList, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            dateStr = DatePickerUtil.dateStrYYYYMMDD(date);\n            dailyTaskHistoryList = new Array();\n            _context.prev = 2;\n            _context.next = 5;\n            return getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n              params: {\n                nextTargetDate: dateStr\n              }\n            });\n\n          case 5:\n            res = _context.sent;\n            dailyTaskHistoryList = createDailyTaskHistoryList(res.data);\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](2);\n            Router.push('/Error?400');\n\n          case 12:\n            return _context.abrupt(\"return\", dailyTaskHistoryList);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[2, 9]]);\n  }));\n  return _getDailyTaskHistoryList.apply(this, arguments);\n}\n\nfunction createDailyTaskHistoryList(responseData) {\n  var outerLength = responseData.length;\n  var dailyTaskHistoryList = [];\n\n  for (var i = 0; i < outerLength; i++) {\n    var tempList = responseData[i];\n    var innerLength = tempList.length;\n    dailyTaskHistoryList[i] = new Array();\n\n    for (var j = 0; j < innerLength; j++) {\n      var dailyTaskHistory = new DailyTaskHistory(responseData[i][j][\"dailyTaskId\"], responseData[i][j][\"title\"], responseData[i][j][\"doneDate\"], responseData[i][j][\"doneTime\"], responseData[i][j][\"quota\"], responseData[i][j][\"doneFlg\"]);\n      dailyTaskHistoryList[i].push(dailyTaskHistory);\n    }\n  }\n\n  return dailyTaskHistoryList;\n}\n\nexport default DailyTaskHistoryBoard;\n\nvar _c;\n\n$RefreshReg$(_c, \"DailyTaskHistoryBoard\");","map":{"version":3,"sources":["/Users/shumiya/Desktop/dev/react/shumipro_front/src/components/DailyTaskHistory/DailyTaskHistoryBoard.tsx"],"names":["React","useState","useEffect","DailyTaskHistoryList","DailyTaskHistory","getApiClient","Router","DatePickerUtil","styles","DailyTaskHistoryBoard","props","dailyTaskHistoryList","setDailyTaskHistoryList","callGetDailyTaskHistoryList","res","getDailyTaskHistoryList","targetDate","then","ret","loadNextHistory","nextTargetDate","Date","diff","targetDateDiff","setDate","getDate","get","process","env","NEXT_PUBLIC_API_DAILY_TASK_HISTORY","params","dateStrYYYYMMDD","taskCommentList","createDailyTaskHistoryList","data","setTargetDateDiff","error","push","daily_task_history_load","date","dateStr","Array","responseData","outerLength","length","i","tempList","innerLength","j","dailyTaskHistory"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useState, useEffect} from 'react';\nimport DailyTaskHistoryList from './DailyTaskHistoryList';\nimport { DailyTaskHistory } from '../common/interface';\nimport {getApiClient} from '../util/AuthenticationUtil';\nimport Router from 'next/router';\nimport * as DatePickerUtil from '../util/DatePickerUtil';\nimport styles from '../../styles/DailyTaskHistoryBoard.module.css';\n\n\ninterface DailyTaskHistoryBoardProps {\n    targetDate: Date;\n    targetDateDiff: number;\n    setTargetDateDiff: Dispatch<SetStateAction<number>>;\n}\n\nconst DailyTaskHistoryBoard: React.FC<DailyTaskHistoryBoardProps> = (props) => {\n    const [dailyTaskHistoryList, setDailyTaskHistoryList] = useState<DailyTaskHistory[][]>([]);\n\n    useEffect(() => {\n        callGetDailyTaskHistoryList();\n    }, []);\n\n    const callGetDailyTaskHistoryList = () => {\n        var res: Promise<DailyTaskHistory[][]> = getDailyTaskHistoryList(props.targetDate);\n        res.then(ret => {\n            setDailyTaskHistoryList(ret);\n        });\n    }\n\n    const loadNextHistory = () => {\n        let nextTargetDate = new Date(props.targetDate)\n        let diff = targetDateDiff - 5;\n        nextTargetDate.setDate(nextTargetDate.getDate() - 5)\n\n        try {\n\n            getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n                params: {\n                    nextTargetDate: DatePickerUtil.dateStrYYYYMMDD(nextTargetDate)\n                }\n            }).then(res => {\n                let taskCommentList = createDailyTaskHistoryList(res.data);\n                setDailyTaskHistoryList([...dailyTaskHistoryList, ...taskCommentList])\n                props.setTargetDateDiff(nextTargetDate)\n            })\n        } catch(error){\n            Router.push('/Error?400');\n        }\n    }\n\n    return (\n        <div>\n            <DailyTaskHistoryList \n                key=\"DailyTaskHistoryList\"\n                dailyTaskHistoryList={dailyTaskHistoryList}\n                targetDate={props.targetDate}\n            />\n\n            <div className={styles.daily_task_history_load} onClick={loadNextHistory}><i className=\"fa fa-arrow-circle-down faa-wrench animated-hover\" /></div>\n        </div>\n    )\n}\n\nasync function getDailyTaskHistoryList(date: Date){\n    let dateStr = DatePickerUtil.dateStrYYYYMMDD(date)\n    var dailyTaskHistoryList : DailyTaskHistory[][] = new Array();\n\n    try {\n        const res = await getApiClient().get(process.env.NEXT_PUBLIC_API_DAILY_TASK_HISTORY, {\n            params: {\n                nextTargetDate: dateStr\n            }\n        });\n        dailyTaskHistoryList = createDailyTaskHistoryList(res.data);\n    } catch(error){\n        Router.push('/Error?400');\n    }\n    return dailyTaskHistoryList;\n}\n\nfunction createDailyTaskHistoryList(responseData: any[]): DailyTaskHistory[][]{\n\n    let outerLength: number = responseData.length;\n    var dailyTaskHistoryList :DailyTaskHistory[][] = [];\n\n    for (var i = 0; i < outerLength; i++) {\n\n        let tempList = responseData[i]\n        let innerLength = tempList.length;\n\n        dailyTaskHistoryList[i] = new Array();\n\n        for (var j = 0; j < innerLength; j++) {\n\n            let dailyTaskHistory = new DailyTaskHistory(responseData[i][j][\"dailyTaskId\"], responseData[i][j][\"title\"],\n            responseData[i][j][\"doneDate\"], responseData[i][j][\"doneTime\"], responseData[i][j][\"quota\"], responseData[i][j][\"doneFlg\"]);\n\n            dailyTaskHistoryList[i].push(dailyTaskHistory);\n        }\n    }\n    return dailyTaskHistoryList;\n}\n\nexport default DailyTaskHistoryBoard;"]},"metadata":{},"sourceType":"module"}